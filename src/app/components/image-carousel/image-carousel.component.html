<div class="carousel-container">
    <!-- Main carousel -->
    <div class="carousel">
      <!-- Image container with transitions -->
      <div class="carousel-inner">
        <img 
          *ngFor="let image of images; let i = index" 
          [src]="image" 
          [alt]="altText" 
          [class.active]="i === currentIndex"
          (click)="toggleExpand()"
        >
      </div>
      
      <!-- Navigation buttons -->
      <button class="carousel-control prev" (click)="previous(); $event.stopPropagation()">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24" fill="none" stroke="currentColor" stroke-width="2">
          <polyline points="15 18 9 12 15 6"></polyline>
        </svg>
      </button>
      <button class="carousel-control next" (click)="next(); $event.stopPropagation()">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24" fill="none" stroke="currentColor" stroke-width="2">
          <polyline points="9 18 15 12 9 6"></polyline>
        </svg>
      </button>
      
      <!-- Indicator dots -->
      <div class="carousel-dots">
        <button 
          *ngFor="let image of images; let i = index" 
          class="dot" 
          [class.active]="i === currentIndex"
          (click)="goToSlide(i); $event.stopPropagation()"
        ></button>
      </div>
    </div>
    
    <!-- Expanded view overlay -->
    <div *ngIf="isExpanded" class="expanded-view" (click)="closeExpanded($event)">
      <div class="expanded-content">
        <button class="close-btn" (click)="toggleExpand(); $event.stopPropagation()">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24" fill="none" stroke="currentColor" stroke-width="2">
            <line x1="18" y1="6" x2="6" y2="18"></line>
            <line x1="6" y1="6" x2="18" y2="18"></line>
          </svg>
        </button>
        
        <div class="expanded-carousel">
          <img [src]="images[currentIndex]" [alt]="altText">
          
          <button class="expanded-control prev" (click)="previous(); $event.stopPropagation()">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24" fill="none" stroke="currentColor" stroke-width="2">
              <polyline points="15 18 9 12 15 6"></polyline>
            </svg>
          </button>
          <button class="expanded-control next" (click)="next(); $event.stopPropagation()">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24" fill="none" stroke="currentColor" stroke-width="2">
              <polyline points="9 18 15 12 9 6"></polyline>
            </svg>
          </button>
        </div>
        
        <div class="expanded-indicator">
          {{currentIndex + 1}} / {{images.length}}
        </div>
      </div>
    </div>
  </div>